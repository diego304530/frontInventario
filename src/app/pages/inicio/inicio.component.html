<nb-card>
    <nb-card-header>
        CLIENTES DE CUMPLEAÃ‘OS
        <div class="d-flex justify-content-end">
            <button class="btn btn-primary" (click)="openModal(modalCorreo)">Enviar mensaje &nbsp; <i class="fas fa-comment-alt"></i></button>
        </div>
    </nb-card-header>
    <table class="table">
        <thead>
            <tr>
                <th>
                    <nb-checkbox [checked]="this.seleccionTodos" (checkedChange)="this.seleccionarTodos($event)"></nb-checkbox>
                </th>
                <th>Nombre</th>
                <th>Apellido</th>
                <th>Direccion</th>
                <th>Fecha de Nacimiento</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let item of this.listaClientes">
                <td>
                    <nb-checkbox [(checked)]="item.selected" (checkedChange)="this.cambioSeleccion($event)"></nb-checkbox>
                </td>
                <td>{{item.name}}</td>
                <td>{{item.lastName || ''}}</td>
                <td>{{item.address || ''}}</td>
                <td>{{item.birthdayDate || ''}}</td>
            </tr>
        </tbody>
    </table>
</nb-card>

<ng-template #modalCorreo let-ref="dialogRef">
    <nb-card style="width: 800px;">
        <nb-card-header>Preparacion del Mensaje</nb-card-header>
        <nb-card-body>
            <form [formGroup]="this.formCorreo" class="mt-3">
                <input type="text" class="form-control" formControlName="asunto" placeholder="Asunto">
                <textarea class="form-control mt-3" placeholder="Contenido" rows="10" formControlName="contenido"></textarea>
            </form>
        </nb-card-body>
        <nb-card-footer class="d-flex justify-content-end">
            <button class="btn btn-danger" (click)="ref.close()">Cerrar</button> &nbsp;
            <button class="btn btn-primary" (click)="enviarMensaje(); ref.close()">Enviar mensaje &nbsp; <i class="fas fa-comment-alt"></i></button>
        </nb-card-footer>
    </nb-card>
</ng-template>